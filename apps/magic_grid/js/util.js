function preloadImg(){for(var t=0;t<images.length;t++)content=images[t],jQuery.preLoadImages("images/"+content+".jpg")}function drawMainPage(){stopWatchTime(),stopGuessTime();var t=new Grid(state.getNextStageLevel());timeCountDown=3*state.getCurrentLevel(),watchIntervalId=setInterval(function(){displayWatchPage(t,state)},1e3),writeTable(t),showLifeInfo(state.lifeNumber),showScoreInfo(state.totalScore),cleanLeftData()}function displayWatchPage(t,e){showTimeInfo()&&hideDataTable(t,e)}function displayGuessPage(t){showTimeInfo()&&(stopGuessTime(),state.stopped=!0,showLeftImages(t),printLose())}function showTimeInfo(){return timeCountDown>=0?($("#time").html("<span>"+timeCountDown--+"</span>"),!1):(cleanLeftData(),!0)}function showLifeInfo(t){for(var e="<div>",a=0;t>a;a++)e+="<img src = 'images/life.jpg'>";e+="</div>",$("#life").html(e)}function showScoreInfo(t){$("#score").html("Score: "+t)}function nextStage(){$("header .info").html(""),state.stopped=!1,drawMainPage()}function handleResult(t,e,a){t.handleClickEvent(e)?$("#"+e+" .back img").attr("src","images/"+t.content[e]+".jpg"):(showLifeInfo(--a.lifeNumber),$("#"+e+" .back img").attr("src","images/sad.jpg")),0==t.leftNumber&&(stopGuessTime(),cleanLeftData(),a.success=!0,a.stopped=!0,a.totalScore+=100,printInfo("<span class='win'>Congratulations! </span><a href='javascript:nextStage()'>Go Next!</a>")),a.lifeNumber<=0&&(stopGuessTime(),a.success=!1,a.stopped=!0,showLeftImages(t),printLose()),writeResultStatus(t)}function showLeftImages(t){result=t.GetResultArray();for(var e=0;e<result.length;e++)current=result[e],$("#"+current).addClass("flip"),$("#"+current+" .back img").attr("src","images/"+t.content[current]+".jpg")}function cleanLeftData(){$("#time").html(""),$("#result").html(""),printInfo("")}function printInfo(t){$("#status .info").html(t)}function printLose(){printInfo("<span class='lose'>You lose! </span><a href='javascript:replay()'>Try Again?</a>")}function hideDataTable(t,e){stopWatchTime(),$.each($(".front img"),function(){$(this).fadeOut("slow",function(){$(this).attr("src","images/question.jpg"),$(this).attr("title","")}),$(this).fadeIn("slow")}),triggerGuessPage(t,e),writeResultStatus(t),showLifeInfo(e.lifeNumber)}function triggerGuessPage(t,e){timeCountDown=3*e.getCurrentLevel(),$("td").click(function(){e.stopped||handleResult(t,this.id,e)}),guessIntervalId=setInterval(function(){displayGuessPage(t)},1e3),printInfo(t.displayCondition)}function writeResultStatus(t){$("#result").html("Left : "+t.leftNumber+"/"+t.totalNumber)}function writeTable(t){$("#main").html(t.generateTable())}function stopWatchTime(){clearInterval(watchIntervalId)}function stopGuessTime(){clearInterval(guessIntervalId)}function replay(){location.reload()}var watchIntervalId,guessIntervalId,state=new State;$(document).ready(function(){preloadImg(),printInfo("<span>Welcome To Magic Grid. Good Luck! </span> <br/><br/><br/><br/> <a href='javascript:drawMainPage()'>Start!</a>")});var timeCountDown=3*state.getCurrentLevel();